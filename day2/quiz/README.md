# Quiz

- Q1. 關於容器（Container）和虛擬機（VM）的差異，以下哪些敘述是正確的？（複選）

(A) 容器共享 Host 的作業系統內核(Kernel)，而虛擬機則有自己的作業系統內核  
(B) 虛擬機通常比容器啟動速度更快，因為虛擬機不需要啟動作業系統  
(C) 容器比虛擬機更輕量級，因為容器只包含應用程式及其依賴，而虛擬機包含整個作業系統  
(D) 虛擬機通過硬體虛擬化實現資源隔離，而容器通過作業系統層的 namespace 技術實現資源隔離  
(E) 容器的映像檔通常比較小，虛擬機的映像檔通常比較大

Ans: A, C, E

- Q2. 在 Docker 中，關於容器的資源控管（如 --cpus 和 --memory），以下哪些敘述是正確的？（複選）

(A) 使用 --cpus 選項可以限制容器最多使用的 CPU 數量  
(B) --memory 選項可以設置容器的最大記憶體使用量，超過該限制後容器會被自動停止  
(C) 容器的 CPU 和記憶體限制只能在容器啟動時設置，無法在運行過程中動態調整  
(D) 如果不設置 --memory 限制，容器可以使用宿主機的全部記憶體  
(E) 如果 container 使用超過 --cpus 的設定，超過該限制後容器會被自動停止

Ans: A, B, D

- Q3. 有三個 Docker 容器分別設置了如下的資源限制：

  - 容器 A： --cpu-shares=512
  - 容器 B： --cpu-shares=2048
  - 容器 C： 沒有設定 --cpu-shares

假設宿主機有 1 個 CPU 核心。當三個容器同時運行且所有容器都完全佔用可用 CPU 資源時，以下哪些敘述是正確的？（複選）

(A) 容器 A 將會獲得 14% (1/7) 的運算資源  
(B) 容器 B 將會獲得 57% (4/7) 的運算資源  
(C) 容器 A 將會獲得 20% (1/5) 的運算資源  
(D) 容器 B 將會獲得 80% (4/5) 的運算資源  
(E) 容器 C 因為沒有設定 --cpu-shares，所以不會獲得任何運算資源

Ans: A, B  
講解: 沒有設定，預設為 1024

- Q4. 以下兩個容器分別在不同的 Host 上啟動，Host 都各自有一個 CPU:

  - 容器 A： --cpu-shares=512
  - 容器 B： --cpus=0.5

當沒有其他任何 process 或容器在競爭 CPU 資源時，以下哪些敘述正確？

(A) 容器 A 只能獲得 50% 的 CPU 運算資源  
(B) 容器 A 可以獲得超過 50% 的 CPU 運算資源  
(C) 容器 B 只能獲得 50% 的 CPU 運算資源  
(D) 容器 B 可以獲得超過 50% 的 CPU 運算資源  
(E) 容器 A 和容器 B 的 CPU 資源分配將由 Host 的 CPU scheduler 自動調整，使其平衡

Ans: B, C

- Q5. 在使用 Docker 容器時，為了進行效能調教，以下哪些做法是正確的？（複選）

(A) 使用 --cpus 和 --memory 選項來限制容器的資源使用量，避免單個容器佔用過多資源  
(B) 遵循 Single Concern Principle (SCP)，每個容器只執行單一職責的應用程式  
(C) 使用多階段構建（multi-stage build）來最佳化映像檔大小  
(D) 選擇足夠小的映像檔，減少容器啟動時間和資源消耗  
(E) 遵循 Image Immutability Principle (IIP)，確保映像檔在構建後不會被修改，以提高安全性和一致性

Ans: A, B, C, D, E

- Q6. 根據以下描述，哪個敘述是錯誤的？（單選）

(A) 同一個 image 可啟動多個 container，不同的 container 有各自的可寫層  
(B) 下層的容器層是唯讀的  
(C) 在容器中，如果要修改下層檔案，會透過 Copy-On-Write (COW) 技術，從下層「複製」到上層，且是 file-level  
(D) Docker 映像檔中的每一層都是從基礎映像檔開始，並且每一層都是前一層的完全複製

Ans: D

- Q7. 在開發 Dockerfile 時，以下哪些做法是正確的？（多選）

(A) 只要放在 DockerHub 上的映像檔都是可以信任的  
(B) 將常變動的部分放在 Dockerfile 的上層指令，以充分利用 Docker 的緩存機制  
(C) 使用多階段構建（multi-stage build）來減少最終映像檔的大小  
(D) 使用 .dockerignore 文件來排除不必要的文件和目錄，減少映像檔的大小  
(E) 在 Dockerfile 中使用 RUN 指令安裝所有必要的軟體，但不清理暫存檔案，以便更快地構建映像檔

Ans: C, D

- Q8. 當 Docker 容器限制了 CPU 資源且容器內的應用程式是多執行緒（multi-threaded）時，CPU 資源不足時，會出現什麼情況？（單選）

(A) 應用程式會自動調整為單執行緒模式以避免 throttle  
(B) 多執行緒的應用程式將無法正常運行，並且會崩潰  
(C) 多執行緒的應用程式將比單執行緒應用程式更早遭遇 CPU throttle，導致性能顯著下降  
(D) CPU throttle 只會影響單執行緒應用程式，對多執行緒應用程式沒有影響

Ans: C
